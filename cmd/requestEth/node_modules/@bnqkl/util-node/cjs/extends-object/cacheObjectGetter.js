"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.cacheObjectGetter = void 0;
const SYM = Symbol("cog");
function cacheObjectGetter(obj) {
    for (const [key, dep] of Object.entries(Object.getOwnPropertyDescriptors(obj))) {
        const sourceGet = dep.get;
        if (sourceGet && !sourceGet[SYM]) {
            dep.get = () => {
                const res = sourceGet();
                Object.defineProperty(obj, key, { value: res });
                return res;
            };
            dep.get[SYM] = true;
            Object.defineProperty(obj, key, dep);
        }
    }
    return obj;
}
exports.cacheObjectGetter = cacheObjectGetter;
